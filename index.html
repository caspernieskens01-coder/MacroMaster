<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MACROMASTER ‚Äî Recepten + per‚Äërecept macro‚Äëcalculator</title>
  <meta name="theme-color" content="#0BDBE1" />
  <link rel="icon" href="/img/favicon.png" />
  <style>
    :root{
      --bg:#070a0c;--card:#0f1418;--muted:#a3a3a3;--text:#eaf2f7;--acc:#0BDBE1;--chip:#0b1216;--border:#1d242b;
      --radius:18px;--radius-sm:12px;--shadow:0 10px 36px rgba(0,0,0,.28)
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:
      radial-gradient(1100px 420px at 12% -10%,rgba(11,219,225,.08),transparent),
      linear-gradient(180deg,#070a0c,#0b1014 40%,#0b0f13);
      color:var(--text)}
    img{display:block;max-width:100%}
    .wrap{max-width:1040px;margin:0 auto;padding:20px}

    /* header */
    header{position:sticky;top:0;z-index:20;background:rgba(7,10,12,.85);backdrop-filter:blur(10px);border-bottom:1px solid var(--border)}
    .brand{display:flex;align-items:center;justify-content:space-between;gap:14px;min-height:72px}
    .brand-left{display:flex;align-items:center;gap:14px}
    .logo{height:36px;width:auto;filter:drop-shadow(0 2px 6px rgba(11,219,225,.18))}
    .title{font-weight:900;letter-spacing:.4px;margin:0;line-height:1}
    .by{font-size:12px;color:#7aa0ab;margin-top:4px}
    .nav{display:flex;gap:12px}
    .chip{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--border);border-radius:999px;background:var(--chip);color:#cfe3e8;font-size:12px}
    .btn{all:unset;cursor:pointer;padding:12px 18px;border-radius:999px;border:1px solid #0f2a30;background:#0e181f;color:#9adfe4;transition:transform .12s ease, box-shadow .12s ease, background .12s ease}
    .btn:hover{transform:translateY(-1px);box-shadow:0 8px 24px rgba(0,0,0,.25)}
    .btn:focus-visible{outline:2px solid var(--acc);outline-offset:2px}
    .btn.acc{background:var(--acc);color:#03242a;font-weight:800;border-color:transparent}
    .btn.acc:hover{box-shadow:0 10px 26px rgba(11,219,225,.25)}

    /* hero */
    .hero{padding:34px 0 10px}
    .hero h2{font-size:40px;line-height:1.08;margin:0 0 10px}
    .sub{color:#b7c8cf;margin:6px 0 16px}
    .cta{display:flex;gap:12px;flex-wrap:wrap}

    /* search + grid */
    .searchbar{display:grid;grid-template-columns:1fr 180px 160px;gap:12px;margin:20px 0}
    .input,select{background:#0e181f;border:1px solid #1e2a33;color:var(--text);padding:13px 14px;border-radius:var(--radius-sm);outline:none}
    .input::placeholder{color:#819aa4}

    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:20px}
    .card{grid-column:span 6;background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow);transition:transform .12s ease, box-shadow .12s ease}
    .card:hover{transform:translateY(-2px);box-shadow:0 14px 40px rgba(0,0,0,.32)}
    .thumb{aspect-ratio:16/9;border-radius:14px;overflow:hidden;background:linear-gradient(180deg,#0b1216,#0c1419);margin-bottom:12px;display:flex;align-items:center;justify-content:center;color:#62727a}
    .card h3{margin:0 0 6px}
    .desc{color:#b7c8cf;margin:0 0 10px}
    .tagbar{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0 12px}
    .pill{padding:6px 10px;background:var(--chip);border:1px solid var(--border);border-radius:999px;color:#cfe3e8;font-size:12px}
    .open{margin-top:auto}

    /* detail */
    .back{display:inline-block;margin:0 0 16px;color:#9adfe4}
    .h1{font-size:34px;font-weight:900;margin:6px 0}
    .subtitle{color:#b7c8cf;margin-bottom:14px}
    .two{display:grid;grid-template-columns:1.08fr .92fr;gap:20px}
    .panel{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow)}
    .inputs{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:14px}
    .label{display:block;font-size:13px;color:#cfe3e8;margin-bottom:6px}
    .in{width:100%;padding:12px 12px;border-radius:var(--radius-sm);border:1px solid #24343f;background:#0f171c;color:var(--text)}
    .apply{margin-top:4px}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px solid #1d2931}
    th{text-align:left;color:#cfe3e8}
    tfoot td{font-weight:800;border-top:1px solid #2a3942}

    .summary{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .chipbox{background:#0f171c;border:1px solid #1e2a33;border-radius:16px;padding:12px;text-align:center}
    .num{font-size:22px;font-weight:900}

    .footer{color:#8b91a3;text-align:center;padding:28px 0;border-top:1px solid var(--border);margin-top:28px}

    @media (max-width:980px){
      .searchbar{grid-template-columns:1fr 1fr}
      .two{grid-template-columns:1fr}
      .inputs{grid-template-columns:repeat(2,1fr)}
      .hero h2{font-size:32px}
    }
    @media (max-width:640px){
      .grid{gap:14px}
      .card{grid-column:span 12}
      .inputs{grid-template-columns:1fr}
    }
    @media (prefers-reduced-motion:reduce){
      *,*::before,*::after{animation:none!important;transition:none!important}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap brand">
      <div class="brand-left">
       <img class="logo" src="img/logo.png" alt="Macromaster logo">
        <div>
          <h1 class="title">MACROMASTER</h1>
          <div class="by">by CASPER PT</div>
        </div>
      </div>
      <nav class="nav">
        <button id="navRecipes" class="btn">Recepten</button>
        <button id="navCalc" class="btn acc">Calorie rekenmachine</button>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="wrap">
      <h2>Grip op je voeding ‚Äî zonder gedoe</h2>
      <p class="sub">Recepten met directe macro's of bereken je onderhoud & macroverdeling. Clean, snel, on‚Äëbrand.</p>
      <div class="cta">
        <a href="#" id="ctaRecipes" class="btn">üîé Bekijk recepten</a>
        <a href="#" id="ctaCalc" class="btn acc">‚ö° Reken mijn calorie√´n uit</a>
      </div>
    </div>
  </section>

  <main class="wrap">
    <!-- SEARCH + LIST -->
    <div id="listView" aria-live="polite">
      <div class="searchbar">
        <input id="q" class="input" type="search" placeholder="Zoek op titel, ingredi√´nt, tag‚Ä¶ (bijv. 'kip', 'pasta')" />
        <select id="cat" class="input">
          <option value="">Alle categorie√´n</option>
          <option value="ontbijt">Ontbijt</option>
          <option value="lunch">Lunch</option>
          <option value="diner">Diner</option>
          <option value="snack">Snack</option>
        </select>
        <select id="sort" class="input">
          <option value="">Sorteer op</option>
          <option value="kcal-asc">Kcal ‚Üë</option>
          <option value="kcal-desc">Kcal ‚Üì</option>
          <option value="protein-desc">Eiwit ‚Üì</option>
          <option value="carbs-desc">Koolh. ‚Üì</option>
          <option value="fat-desc">Vetten ‚Üì</option>
        </select>
      </div>
      <div id="cards" class="grid"></div>
      <div id="empty" class="sub" style="text-align:center" hidden>Geen resultaten. Pas je zoekopdracht of filters aan.</div>
    </div>

    <!-- DETAIL VIEW -->
    <section id="detailView" hidden>
      <a href="#" class="back" onclick="return backToList()">‚Üê Terug</a>
      <h1 id="dTitle" class="h1"></h1>
      <div id="dSubtitle" class="subtitle"></div>

      <div class="two">
        <div class="panel">
          <div class="inputs">
            <label class="label">Porties<input id="inServ" class="in" type="number" min="1" value="4"></label>
            <label class="label">Vlees p.p. (g)<input id="inMeat" class="in" type="number" min="0" value="100"></label>
            <label class="label">Rijst p.p. (g droog)<input id="inRice" class="in" type="number" min="0" value="80"></label>
            <label class="label">Groente p.p. (g)<input id="inVeg" class="in" type="number" min="0" value="200"></label>
            <label class="label">Water in saus (ml, totaal)<input id="inWater" class="in" type="number" min="0" value="20"></label>
            <div style="align-self:end"><button id="apply" class="btn acc">Toepassen</button></div>
          </div>

          <h3>Ingredi√´nten</h3>
          <div class="panel" style="padding:0">
            <table id="tbl">
              <thead><tr><th>Ingredi√´nt</th><th>Hoeveelheid</th><th>Eiwit</th><th>Khd</th><th>Vet</th><th>kcal</th></tr></thead>
              <tbody></tbody>
              <tfoot><tr><td>Totaal</td><td id="tQty">‚Äî</td><td id="tP">‚Äî</td><td id="tC">‚Äî</td><td id="tF">‚Äî</td><td id="tK">‚Äî</td></tr></tfoot>
            </table>
          </div>

          <h3 style="margin-top:16px">Bereiding</h3>
          <div id="steps" class="panel"></div>
        </div>

        <div class="panel">
          <h3>Macro's (hele bereiding)</h3>
          <div class="summary">
            <div class="chipbox"><div>Eiwit</div><div id="sP" class="num">‚Äî</div><div>g</div></div>
            <div class="chipbox"><div>Koolhydraten</div><div id="sC" class="num">‚Äî</div><div>g</div></div>
            <div class="chipbox"><div>Vetten</div><div id="sF" class="num">‚Äî</div><div>g</div></div>
            <div class="chipbox"><div>Calorie√´n</div><div id="sK" class="num">‚Äî</div><div>kcal</div></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <div class="footer">¬© <span id="year"></span> Macromasters ‚Äî clean UI voor snelle macro‚Äëchecks.</div>

  <script>
    const $ = (q, el=document) => el.querySelector(q); const $$ = (q, el=document) => [...el.querySelectorAll(q)];
    const state = { all: [], view:'list', current:null, query:'', cat:'', sort:'' };
    function slugify(s){return (s||'').toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'')}

    async function loadData(){
      try{ const r = await fetch('./recipes.json?cb='+Date.now()); if(!r.ok) throw new Error(r.status); const data = await r.json(); return data.map(x=>({...x,id:x.id||slugify(x.title)})); }
      catch(e){ console.warn('fallback json omdat recipes.json niet laadt', e); return [ { id:'beef-teriyaki', title:'Beef Teriyaki', subtitle:'Suikervrij, zonder binders. Glans door reductie. Sojasaus, gember, knoflook.', tags:['vlees','rijst'], params:{servings:4, meat_g:100, rice_g_dry:80, veg_g:200, water_ml_total:20}, model:'beef_teriyaki' }, { id:'kip-rijst-groente', title:'Kip ‚Ä¢ Rijst ‚Ä¢ Groente', subtitle:'Basis fitness recept; stel g/pp in en schaal porties + macro\'s.', tags:['kip','rijst'], params:{servings:4, meat_g:120, rice_g_dry:75, veg_g:200, water_ml_total:0}, model:'chicken_rice_veg' } ]; }
    }

    function applyFilters(list){ let out=list; const q=state.query.trim().toLowerCase(); if(q){ out = out.filter(r => (r.title+ ' ' + (r.subtitle||'') + ' ' + (r.tags||[]).join(' ')).toLowerCase().includes(q)); } if(state.cat){ out = out.filter(r => (r.category||'').toLowerCase()===state.cat); } switch(state.sort){ case 'kcal-asc': case 'kcal-desc': default: } return out; }

    function renderCards(list){ const c=$('#cards'); c.innerHTML=''; if(!list.length){ $('#empty').hidden=false; return } $('#empty').hidden=true; list.forEach(r=>{ const el=document.createElement('article'); el.className='card'; el.innerHTML=`
      ${r.image?`<div class='thumb'><img src='${r.image}' alt='${r.title}'></div>`:"<div class='thumb'></div>"}
      <h3>${r.title}</h3>
      ${r.subtitle?`<p class='desc'>${r.subtitle}</p>`:''}
      ${r.tags?.length?`<div class='tagbar'>${r.tags.map(t=>`<span class='pill'>${t}</span>`).join('')}</div>`:''}
      <button class='btn acc open'>Open recept</button>`; el.querySelector('.open').addEventListener('click',()=> openDetail(r.id)); c.appendChild(el); }); }

    function showView(v){ state.view=v; $('#listView').hidden = v!=='list'; $('#detailView').hidden = v!=='detail'; }

    function openDetail(id){ const r = state.all.find(x=>x.id===id); if(!r) return; state.current = JSON.parse(JSON.stringify(r)); $('#dTitle').textContent=r.title; $('#dSubtitle').textContent=r.subtitle||''; $('#inServ').value=r.params?.servings??4; $('#inMeat').value=r.params?.meat_g??100; $('#inRice').value=r.params?.rice_g_dry??80; $('#inVeg').value=r.params?.veg_g??200; $('#inWater').value=r.params?.water_ml_total??0; calcAndRender(); showView('detail'); history.pushState({id}, '', '#/'+id); window.scrollTo({top:0,behavior:'smooth'}); }
    function backToList(){ showView('list'); history.pushState({}, '', '#/'); return false }

    $('#q').addEventListener('input', e=>{ state.query=e.target.value; renderCards(applyFilters(state.all)); });
    $('#cat').addEventListener('change', e=>{ state.cat=e.target.value; renderCards(applyFilters(state.all)); });
    $('#sort').addEventListener('change', e=>{ state.sort=e.target.value; renderCards(applyFilters(state.all)); });
    $('#apply').addEventListener('click', calcAndRender);
    $('#navRecipes').addEventListener('click', ()=>{ showView('list'); window.scrollTo({top:document.querySelector('#listView').offsetTop-60,behavior:'smooth'}); });
    $('#navCalc').addEventListener('click', ()=>{ window.location.hash='#/calc'; alert('Gebruik de macro calculator onderaan (komt als aparte pagina in de volgende versie).'); });
    $('#ctaRecipes').addEventListener('click', (e)=>{ e.preventDefault(); showView('list'); window.scrollTo({top:document.querySelector('#listView').offsetTop-60,behavior:'smooth'}); });
    $('#ctaCalc').addEventListener('click', (e)=>{ e.preventDefault(); window.location.hash='#/calc'; alert('Gebruik de macro calculator onderaan (komt als aparte pagina in de volgende versie).'); });

    const NUTRIENTS = { beef_raw:{p:22,c:0,f:4,k:130}, rice_dry:{p:7,c:78,f:0.6,k:360}, broccoli_raw:{p:3,c:7,f:0.4,k:35}, oil:{p:0,c:0,f:100,k:900}, soy_sauce_ml:{p:5,c:6,f:0,k:80}, rice_vinegar_ml:{p:0,c:1,f:0,k:3.3}, sesame_oil:{p:0,c:0,f:100,k:900}, garlic:{p:6.4,c:33,f:0.5,k:149}, ginger:{p:1.8,c:18,f:0.8,k:80}, water:{p:0,c:0,f:0,k:0}, chicken_raw:{p:23,c:0,f:1.5,k:110}, veg_mix:{p:2,c:6,f:0.2,k:30} };
    function fmt(x){return (Math.round(x*10)/10).toLocaleString('nl-NL')}
    function ingr(name, qty, unit, per100){ const f=qty/100; return {n:name, qty, unit, p:per100.p*f, c:per100.c*f, f:per100.f*f, k:per100.k*f}; }
    function calcAndRender(){ const s=+$('#inServ').value, meat=+$('#inMeat').value, rice=+$('#inRice').value, veg=+$('#inVeg').value, wml=+$('#inWater').value; const r=state.current; let rows=[]; if(r.model==='beef_teriyaki'){ rows=[ ingr('Rundereepjes (rauw)', s*meat,'g',NUTRIENTS.beef_raw), ingr('Witte rijst (droog)', s*rice,'g',NUTRIENTS.rice_dry), ingr('Broccoli (rauw)', s*veg,'g',NUTRIENTS.broccoli_raw), ingr('Neutrale olie', 10,'g',NUTRIENTS.oil), ingr('Sojasaus',80,'ml',NUTRIENTS.soy_sauce_ml), ingr('Rijstazijn',30,'ml',NUTRIENTS.rice_vinegar_ml), ingr('Sesamolie',5,'g',NUTRIENTS.sesame_oil), ingr('Knoflook',6,'g',NUTRIENTS.garlic), ingr('Gember',20,'g',NUTRIENTS.ginger), ingr('Water',wml,'ml',NUTRIENTS.water) ]; $('#steps').innerHTML=`<ol style="margin:0 0 0 18px;padding:12px"><li><b>Marineren (15‚Äì60 min)</b>: Sojasaus, rijstazijn, sesamolie, knoflook, gember. 2 el apart. Rest over vlees.</li><li><b>Bakken</b>: Vlees droog, pan heet met 1 el olie. In batches 1‚Äì2 min bruin.</li><li><b>Inkoken</b>: Marinade 2‚Äì3 min hard koken tot stroperig.</li><li><b>Afmaken</b>: Vlees terug, 20‚Äì30 s omscheppen. Eventueel 1‚Äì2 el water voor dun glazuur.</li></ol>`; } else { rows=[ ingr('Kipfilet (rauw)', s*meat,'g',NUTRIENTS.chicken_raw), ingr('Witte rijst (droog)', s*rice,'g',NUTRIENTS.rice_dry), ingr('Groentemix (rauw)', s*veg,'g',NUTRIENTS.veg_mix), ingr('Olijfolie',8,'g',NUTRIENTS.oil), ingr('Kruiden/zout',2,'g',NUTRIENTS.water) ]; $('#steps').innerHTML=`<ol style="margin:0 0 0 18px;padding:12px"><li>Kip kruiden en bakken.</li><li>Rijst koken (droog gewogen).</li><li>Groente roerbakken; alles samen serveren.</li></ol>`; }
      const tb=$('#tbl tbody'); tb.innerHTML=''; let TP=0,TC=0,TF=0,TK=0,TQ=0; for(const row of rows){ const tr=document.createElement('tr'); tr.innerHTML=`<td>${row.n}</td><td>${fmt(row.qty)} ${row.unit}</td><td>${fmt(row.p)}</td><td>${fmt(row.c)}</td><td>${fmt(row.f)}</td><td>${fmt(row.k)}</td>`; tb.appendChild(tr); TP+=row.p; TC+=row.c; TF+=row.f; TK+=row.k; TQ+=row.qty; } $('#tQty').textContent=fmt(TQ)+' g/ml'; $('#tP').textContent=fmt(TP); $('#tC').textContent=fmt(TC); $('#tF').textContent=fmt(TF); $('#tK').textContent=fmt(TK); $('#sP').textContent=fmt(TP); $('#sC').textContent=fmt(TC); $('#sF').textContent=fmt(TF); $('#sK').textContent=fmt(TK); }

    (async function init(){ document.getElementById('year').textContent = new Date().getFullYear(); state.all = await loadData(); renderCards(state.all); const hash=location.hash.replace('#/',''); if(hash){ openDetail(hash) } window.addEventListener('popstate', ()=>{ const h=location.hash.replace('#/',''); if(h) openDetail(h); else backToList(); }); })();
  </script>
</body>
</html>
